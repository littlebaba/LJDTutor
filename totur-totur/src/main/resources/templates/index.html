<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="common/common"></head>
<body>

    <div th:include="common/nav :: nav"></div>

    <div class="layui-container">
        <div class="layui-row">
            <div class="layui-col-xs12 layui-col-md8">
                <table id="student" class="layui-table" lay-filter="stu"></table>
                <table id="teacher" class="layui-table" lay-filter="tea"></table>
            </div>
        </div>
    </div>
    <script th:src="@{/js/jquery-1.11.2.min.js}"></script>
    <script th:src="@{/js/layui.all.js}"></script>
    <script type="text/html" id="barDem">
        <a class="layui-btn layui-btn-xs" lay-event="details">查看详细</a>
    </script>
    <script>
        layui.use(['layer','table'], function () {
            var table = layui.table;
            table.render({
                elem: '#student',
                url: '/students',
                size: 'sm',
                skin: 'line',
                cols:[[
                    {align: 'left', title: '<span style="color:#0bcc3d">学生信息</span>',colspan: 6,color:'#5FB878'}
                ],
                    [
                    {field:'grade',width:120, title: '年级',templet: function(d){
                            return d.grade.grade
                        }
                    },
                    {field:'sex', width:70, title: '性别',templet: function(d){
                            var sexStr;
                            (d.sex == 0)? sexStr='男':sexStr='女';
                            return sexStr;
                        }
                    },
                    {field:'subject', width:120, title: '求教科目'},
                    {field:'area', width:150, title: '授课区域',templet: function(d){
                            return d.area.area
                        }
                    },
                    {field:'initDate',title: '更新时间'},
                    {fixed: 'right', width:150, align:'center', toolbar: '#barDem'}
                ]]
            });

            table.on('tool(stu)',function (obj) {
                var data = obj.data;
                var layEvent = obj.event;
                if (layEvent === 'details'){
                    window.location.href="/studentDetailsPage?id="+data.id
                }
            });


            table.render({
                elem: '#teacher',
                url: '/teachers',
                size: 'sm',
                skin: 'line',
                cols:[[
                    {align: 'left', title: '<span style="color:#0bcc3d">教员信息</span>',colspan: 5,color:'#5FB878'}
                ],
                    [
                        {field:'name',width:120, title: '姓名'
                        },
                        {field:'graduatedSchool', width:120, title: '毕业学校'
                        },
                        {field:'subject', width:150, title: '专业'},
                        {field:'contactAddr', width:150, title: '自我简介'
                        },
                        {field:'initDate',title: '更新时间'}
                    ]]
            });

        });

    </script>
</body>
</html>